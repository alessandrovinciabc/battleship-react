(this["webpackJsonpbattleship-react"]=this["webpackJsonpbattleship-react"]||[]).push([[0],{11:function(e,t,r){},12:function(e,t,r){},14:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),s=r(5),a=r.n(s),o=(r(11),r(2)),c=(r(12),r(0));var l=function(e){var t;return Object(c.jsxs)("div",{className:"Board "+e.className,"data-testid":"board",children:[Object(c.jsx)("div",{className:"Board__title","data-testid":"title",children:Object(c.jsx)("span",{className:"title__text",children:e.playerName})}),Object(c.jsx)("div",{className:"squares",children:null===(t=e.board)||void 0===t?void 0:t.squares.map((function(t,r){return t.map((function(t,n){return Object(c.jsx)("div",{className:"square ".concat(t.hit?"square--hit":""," \n                  ").concat(null!==t.shipIndex?"ship":"","\n                  "),"data-testid":"square",onClick:e.handlers?function(){e.handlers({x:n,y:r})}:null},"".concat(n,",").concat(r))}))}))})]})};var u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1?arguments[1]:void 0;if((null===t||void 0===t?void 0:t.size)&&(null===t||void 0===t?void 0:t.squares)){var n=t.size,i=t.squares;if(n>0&&(null===i||void 0===i?void 0:i.length)===n)return e(n,i);throw new Error("Invalid ship passed as first argument")}if(t<0)throw new Error("Invalid size for a ship.");var s=(null===r||void 0===r?void 0:r.length)===t?r:Array(t).fill(!1);return{size:t,squares:s,hit:function(e){e<0||e>this.size||(this.squares[e-1]=!0)},isSunk:function(){return this.squares.every((function(e){return!0===e}))}}};var h=function(e,t,r){return Array.from({length:t},(function(){return Array.from({length:e},r)}))};var v=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)};function d(e){return h(e,e,(function(){return{shipIndex:null,shipComponent:null,hit:!1}}))}function f(e){for(var t=e.squares.length,r=h(t,t,(function(){return{counterX:0,counterY:0}})),n=function(t,n){var i=n.x,s=n.y;if(null===t.shipIndex)for(var a=i;a>=0&&null===e.squares[s][a].shipIndex;--a)r[s][a].counterX+=1},i=function(t,n){var i=n.x,s=n.y;if(null===t.shipIndex)for(var a=s;a>=0&&null===e.squares[a][i].shipIndex;--a)r[a][i].counterY+=1},s=0;s<t;++s)for(var a=0;a<t;++a)n(e.squares[s][a],{x:a,y:s}),i(e.squares[s][a],{x:a,y:s}),r[s][a].coords={x:a,y:s};return r}var p=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",n=[],i="horizontal"===r?"counterX":"counterY",s=0;s<e.length;++s)for(var a=0;a<e.length;++a)e[s][a][i]>=t&&n.push(e[s][a]);return n};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(e<=0)throw new Error("Invalid board size.");var t=d(e);return{squares:t,ships:[],isValidPlaceForShip:function(t,r,n){var i=r.x,s=r.y;if("horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation provided.");if(i<0||s<0||i>=e||s>=e)throw new Error("Invalid coordinates for starting ship position.");if(("horizontal"===n?i:s)+t.size>e)return!1;if("horizontal"===n){for(var a=i;a<i+t.size;++a)if(null!==this.squares[s][a].shipIndex)return!1}else for(var o=s;o<s+t.size;++o)if(null!==this.squares[o][i].shipIndex)return!1;return!0},placeShip:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal",n=this.isValidPlaceForShip(e,t,r);if(!n)throw new Error("Invalid placement for ship.");var i=t.x,s=t.y;if("horizontal"===r)for(var a=1,o=i;o<i+e.size;++o)this.squares[s][o].shipIndex=this.ships.length,this.squares[s][o].shipComponent=a++;else for(var c=1,l=s;l<s+e.size;++l)this.squares[l][i].shipIndex=this.ships.length,this.squares[l][i].shipComponent=c++;this.ships.push(e)},receiveHit:function(e){var t=e.x,r=e.y,n=this.squares[r][t],i=!1;return null!==n.shipIndex&&(this.ships[n.shipIndex].hit(n.shipComponent),i=!0),n.hit=!0,i},hasWorkingShips:function(){return!!this.ships.length&&this.ships.some((function(e){return!e.isSunk()}))},autoPlaceShips:function(t){if(t.reduce((function(e,t){return e+t.size}),0)>e*e)throw new Error("Can't autoplace: ships exceed board size.");for(var r=0;r<t.length;++r){var n=f(this),i={vertical:p(n,t[r].size,"vertical"),horizontal:p(n,t[r].size,"horizontal")};if(i.vertical.length>0&&i.horizontal.length>0){var s=v(0,1)?"vertical":"horizontal",a=v(0,i[s].length-1);this.placeShip(t[r],i[s][a].coords,s)}else if(i.vertical.length>0){var o=v(0,i.vertical.length-1);this.placeShip(t[r],i.vertical[o].coords,"vertical")}else if(i.horizontal.length>0){var c=v(0,i.horizontal.length-1);this.placeShip(t[r],i.horizontal[c].coords,"horizontal")}}}}},j=r(6),x=!1,g={pickMove:function(e){var t=[];if(x)for(var r=0;r<e.squares.length;++r)for(var n=0;n<e.squares.length;++n)e.squares[r][n].hit&&null!==e.squares[r][n].shipIndex&&(t.push({y:r+1,x:n}),t.push({y:r-1,x:n}),t.push({y:r,x:n+1}),t.push({y:r,x:n-1}),t=t.filter((function(t){var r,n;return!!(null===(r=e.squares)||void 0===r||null===(n=r[t.y])||void 0===n?void 0:n[t.x])&&!e.squares[t.y][t.x].hit})));if(0===t.length||!x){x=!1;for(var i=0;i<e.squares.length;++i)for(var s=0;s<e.squares.length;++s)e.squares[i][s].hit||t.push({y:i,x:s})}var a=t.length;if(0===a)throw new Error("No squares to hit!");var o=Object(j.a)({},t[v(0,a-1)]);return null!==e.squares[o.y][o.x].shipIndex&&(x=!0),o}},m=r(3);r(14);var y=function(){var e=Object(n.useState)(b(10)),t=Object(o.a)(e,2),r=t[0],i=t[1],s=Object(n.useState)(b(10)),a=Object(o.a)(s,2),h=a[0],v=a[1],d=Object(n.useState)("vertical"),f=Object(o.a)(d,2),p=f[0],j=f[1],x=Object(n.useState)([5,4,3,3,2]),y=Object(o.a)(x,2),O=y[0],q=y[1],z=Object(n.useState)(!1),S=Object(o.a)(z,2),w=S[0],I=S[1],k=Object(n.useState)(!1),N=Object(o.a)(k,2),E=N[0],P=N[1],C=Object(n.useState)("Place your ships by clicking. Press R to rotate."),M=Object(o.a)(C,2),_=M[0],A=M[1],B=Object(n.useState)(!0),R=Object(o.a)(B,2),F=R[0],H=R[1];return Object(n.useEffect)((function(){if(F){var e=b(10),t=[5,4,3,3,2];t=t.map((function(e){return u(e)})),e.autoPlaceShips(t),v(e),H(!1)}}),[F]),Object(n.useEffect)((function(){var e=function(e){"r"!==e.key&&"R"!==e.key||j((function(e){return"horizontal"===e?"vertical":"horizontal"}))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("div",{className:"App__title",children:"Battleship\ud83d\udee5"}),Object(c.jsx)("div",{className:"text--order",children:_}),w?Object(c.jsxs)("div",{className:"text--winning",children:[E?"Player":"Computer"," has won!"]}):null,Object(c.jsx)("button",{className:"button--reset",onClick:function(){q([5,4,3,3,2]),P(!1),I(!1),A("Place your ships by clicking. Press R to rotate."),i(b(10)),v(b(10)),H(!0)},children:"Reset"}),Object(c.jsxs)("div",{className:"App__container",children:[Object(c.jsx)(l,{playerName:"Player",board:r,handlers:function(e){i((function(t){return 0===O.length?t:Object(m.a)(t,(function(t){var r=u(O[0]);t.isValidPlaceForShip(r,e,p)&&(t.placeShip(r,e,p),q(O.slice(1)),O.length-1===0&&A("Game has begun! Make your move."))}))}))}}),Object(c.jsx)(l,{playerName:"Computer",board:h,handlers:function(e){if(!(w||O.length>0)){var t=function(e){return Object(m.a)(e,(function(e){var t=g.pickMove(e);e.receiveHit(t),e.hasWorkingShips()||(I(!0),A(""))}))};v((function(r){return r.squares[e.y][e.x].hit?r:(i(t),Object(m.a)(r,(function(t){t.receiveHit(e),t.hasWorkingShips()||(I(!0),P(!0),A(""))})))}))}},className:"Board--computer"})]})]})};a.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(y,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.967e1670.chunk.js.map